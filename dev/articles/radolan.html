<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Download RADOLAN Data • kwb.dwd</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Download RADOLAN Data">
<meta property="og:description" content="kwb.dwd">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.dwd</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/radolan.html">Download RADOLAN Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/KWB-R/kwb.dwd/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="radolan_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Download RADOLAN Data</h1>
                        <h4 class="author">Hauke Sonnenberg</h4>
            
            <h4 class="date">2021-02-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KWB-R/kwb.dwd/blob/master/vignettes/radolan.Rmd"><code>vignettes/radolan.Rmd</code></a></small>
      <div class="hidden name"><code>radolan.Rmd</code></div>

    </div>

    
    
<div id="install-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#install-this-package" class="anchor"></a>Install this package</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If required, install the remotes package from CRAN</span>
<span class="co"># install.packages("remotes")</span>

<span class="co"># Install kwb.dwd from GitHub</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"kwb-r/kwb.dwd"</span><span class="op">)</span>

<span class="co"># Install the current development version</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"kwb-r/kwb.dwd@dev"</span><span class="op">)</span></code></pre></div>
</div>
<div id="list-files-available-on-dwds-ftp-server" class="section level2">
<h2 class="hasAnchor">
<a href="#list-files-available-on-dwds-ftp-server" class="anchor"></a>List files available on DWD’s FTP server</h2>
<p>This package contains a function that lists the files that are available on an FTP server. It allows for recursive listing, i.e. listing the files in folders and subfolders. For example, to list all historical RADOLAN files, do:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define the URL to the historical RADOLAN files</span>
<span class="va">url</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">:::</span><span class="fu">ftp_path_cdc</span><span class="op">(</span><span class="st">"grids_germany/daily/radolan/historical"</span><span class="op">)</span>

<span class="co"># List all historical RADOLAN files</span>
<span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/list_url.html">list_url</a></span><span class="op">(</span><span class="va">url</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>It takes about six seconds to get the file list. All file paths and file names (as they were listed on 2020-05-31) are also contained in the data frame <code>dwd_files</code> that is available in the package. You can browse through this data frame to find the files that you are looking for:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get data frame of all files</span>
<span class="va">dwd_files</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="va"><a href="../reference/dwd_files.html">dwd_files</a></span>

<span class="co"># Filter for historical RADOLAN files</span>
<span class="va">radolan_files</span> <span class="op">&lt;-</span> <span class="va">dwd_files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"radolan/historical"</span>, <span class="va">dwd_files</span><span class="op">$</span><span class="va">file</span><span class="op">)</span>, <span class="op">]</span>

<span class="co"># Shorten the path for better display</span>
<span class="va">radolan_files</span><span class="op">$</span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"^grids_germany/"</span>, <span class="st">""</span>, <span class="va">radolan_files</span><span class="op">$</span><span class="va">file</span><span class="op">)</span>

<span class="co"># Show the first file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html">resetRowNames</a></span><span class="op">(</span><span class="va">radolan_files</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                                                               file is_directory</span>
<span class="co">#&gt; 1 grids_germany/daily/radolan/historical/bin/2006/SF-200610.tar.gz        FALSE</span>
<span class="co">#&gt; 2 grids_germany/daily/radolan/historical/bin/2006/SF-200611.tar.gz        FALSE</span>
<span class="co">#&gt; 3 grids_germany/daily/radolan/historical/bin/2006/SF-200612.tar.gz        FALSE</span>
<span class="co">#&gt; 4 grids_germany/daily/radolan/historical/bin/2007/SF-200701.tar.gz        FALSE</span>
<span class="co">#&gt; 5 grids_germany/daily/radolan/historical/bin/2007/SF-200702.tar.gz        FALSE</span>
<span class="co">#&gt; 6 grids_germany/daily/radolan/historical/bin/2007/SF-200703.tar.gz        FALSE</span>
<span class="co">#&gt;        size permissions modification_time user group links</span>
<span class="co">#&gt; 1   7451505  -rw-r--r--  2020-03-30 07:33 9261 15101     1</span>
<span class="co">#&gt; 2  53109545  -rw-r--r--  2020-03-30 11:08 9261 15101     1</span>
<span class="co">#&gt; 3 138991915  -rw-r--r--  2020-03-30 11:08 9261 15101     1</span>
<span class="co">#&gt; 4 228995524  -rw-r--r--  2020-03-30 11:08 9261 15101     1</span>
<span class="co">#&gt; 5 174957194  -rw-r--r--  2020-03-30 07:33 9261 15101     1</span>
<span class="co">#&gt; 6 186723651  -rw-r--r--  2020-03-30 07:34 9261 15101     1</span>
<span class="co">#&gt;                                                 path</span>
<span class="co">#&gt; 1 daily/radolan/historical/bin/2006/SF-200610.tar.gz</span>
<span class="co">#&gt; 2 daily/radolan/historical/bin/2006/SF-200611.tar.gz</span>
<span class="co">#&gt; 3 daily/radolan/historical/bin/2006/SF-200612.tar.gz</span>
<span class="co">#&gt; 4 daily/radolan/historical/bin/2007/SF-200701.tar.gz</span>
<span class="co">#&gt; 5 daily/radolan/historical/bin/2007/SF-200702.tar.gz</span>
<span class="co">#&gt; 6 daily/radolan/historical/bin/2007/SF-200703.tar.gz</span>

<span class="co"># Show the last file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html">resetRowNames</a></span><span class="op">(</span><span class="va">radolan_files</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                                                                                                           file</span>
<span class="co">#&gt; 508                                           grids_germany/hourly/radolan/historical/bin/2019/RW201909.tar.gz</span>
<span class="co">#&gt; 509                                           grids_germany/hourly/radolan/historical/bin/2019/RW201910.tar.gz</span>
<span class="co">#&gt; 510                                           grids_germany/hourly/radolan/historical/bin/2019/RW201911.tar.gz</span>
<span class="co">#&gt; 511                                           grids_germany/hourly/radolan/historical/bin/2019/RW201912.tar.gz</span>
<span class="co">#&gt; 512 grids_germany/hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_bin_de.pdf</span>
<span class="co">#&gt; 513  grids_germany/hourly/radolan/historical/bin/DESCRIPTION_gridsgermany_hourly_radolan_historical_bin_en.pdf</span>
<span class="co">#&gt;     is_directory     size permissions modification_time user group links</span>
<span class="co">#&gt; 508        FALSE 38925469  -rw-r--r--  2020-03-30 11:09 9261 15101     1</span>
<span class="co">#&gt; 509        FALSE 46400625  -rw-r--r--  2020-03-30 07:49 9261 15101     1</span>
<span class="co">#&gt; 510        FALSE 37500639  -rw-r--r--  2020-03-30 07:49 9261 15101     1</span>
<span class="co">#&gt; 511        FALSE 35642775  -rw-r--r--  2020-03-30 11:09 9261 15101     1</span>
<span class="co">#&gt; 512        FALSE    65599  -rw-r--r--  2020-03-30 11:08 9261 15101     1</span>
<span class="co">#&gt; 513        FALSE    62532  -rw-r--r--  2020-03-30 11:08 9261 15101     1</span>
<span class="co">#&gt;                                                                                             path</span>
<span class="co">#&gt; 508                                           hourly/radolan/historical/bin/2019/RW201909.tar.gz</span>
<span class="co">#&gt; 509                                           hourly/radolan/historical/bin/2019/RW201910.tar.gz</span>
<span class="co">#&gt; 510                                           hourly/radolan/historical/bin/2019/RW201911.tar.gz</span>
<span class="co">#&gt; 511                                           hourly/radolan/historical/bin/2019/RW201912.tar.gz</span>
<span class="co">#&gt; 512 hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_bin_de.pdf</span>
<span class="co">#&gt; 513  hourly/radolan/historical/bin/DESCRIPTION_gridsgermany_hourly_radolan_historical_bin_en.pdf</span></code></pre></div>
</div>
<div id="download-zipped-radolan-files-from-dwds-ftp-server" class="section level2">
<h2 class="hasAnchor">
<a href="#download-zipped-radolan-files-from-dwds-ftp-server" class="anchor"></a>Download zipped RADOLAN files from DWD’s FTP server</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Set the target directory</span>
<span class="va">export_dir</span> <span class="op">&lt;-</span> <span class="st">"~/Downloads/radolan"</span>

<span class="co"># Create required directories</span>
<span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/createDirectory.html">createDirectory</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"daily/historical"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Download corresponding RADOLAN files from DWD's FTP server</span>
<span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/download_radolan.html">download_radolan</a></span><span class="op">(</span>
  resolution <span class="op">=</span> <span class="st">"daily"</span>,  
  export_dir <span class="op">=</span> <span class="va">export_dir</span>, 
  start_daily <span class="op">=</span> <span class="st">"2018-07"</span>, 
  end_daily <span class="op">=</span> <span class="st">"2018-08"</span>
<span class="op">)</span></code></pre></div>
<p>The output should look like this:</p>
<pre><code>Download: 'daily' historical radolan data ... 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201807.tar.gz ... 
versuche URL 'ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2018/SF201807.tar.gz'
downloaded 132.2 MB

ok. (1.48s) 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201808.tar.gz ... 
versuche URL 'ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2018/SF201808.tar.gz'
downloaded 173.5 MB

ok. (1.97s) 
ok. (3.45s) </code></pre>
</div>
<div id="unzip-the-downloaded-files" class="section level2">
<h2 class="hasAnchor">
<a href="#unzip-the-downloaded-files" class="anchor"></a>Unzip the downloaded files</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the paths to the zipped files</span>
<span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"\\.tar\\.gz"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Unzip all files to the export directory</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">untar</span>, exdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/path.expand.html">path.expand</a></span><span class="op">(</span><span class="va">export_dir</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="read-the-binary-radolan-files" class="section level2">
<h2 class="hasAnchor">
<a href="#read-the-binary-radolan-files" class="anchor"></a>Read the binary Radolan files</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the paths to all binary Radolan files in the export directory</span>
<span class="va">files_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"---bin$"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Read all Radolan files as raster objects</span>
<span class="va">raster_objects</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">files_bin</span>, <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/catAndRun.html">catAndRun</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Reading"</span>, <span class="va">file</span><span class="op">)</span>,
  <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/read_binary_radolan_file.html">read_binary_radolan_file</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="op">)</span><span class="op">)</span>

<span class="co"># Plot the contents of one file</span>
<span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">raster_objects</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hauke Sonnenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
