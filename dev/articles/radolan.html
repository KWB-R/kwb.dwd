<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Download RADOLAN Data • kwb.dwd</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Download RADOLAN Data">
<meta property="og:description" content="kwb.dwd">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.dwd</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/radolan.html">Download RADOLAN Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/KWB-R/kwb.dwd/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Download RADOLAN Data</h1>
                        <h4 class="author">Hauke Sonnenberg</h4>
            
            <h4 class="date">2020-04-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KWB-R/kwb.dwd/blob/master/vignettes/radolan.Rmd"><code>vignettes/radolan.Rmd</code></a></small>
      <div class="hidden name"><code>radolan.Rmd</code></div>

    </div>

    
    
<div id="install-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#install-this-package" class="anchor"></a>Install this package</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># If required, install the remotes package from CRAN</span>
<span class="co"># install.packages("remotes")</span>

<span class="co"># Install kwb.dwd from GitHub</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"kwb-r/kwb.dwd"</span>)

<span class="co"># Install the current development version</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"kwb-r/kwb.dwd@dev"</span>)</pre></body></html></div>
</div>
<div id="list-files-available-on-dwds-ftp-server" class="section level2">
<h2 class="hasAnchor">
<a href="#list-files-available-on-dwds-ftp-server" class="anchor"></a>List files available on DWD’s FTP server</h2>
<p>This package contains a function that lists the files that are available on an FTP server. It allows for recursive listing, i.e. listing the files in folders and subfolders. For example, to list all historical RADOLAN files, do:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Define the root path to DWD's FTP server</span>
<span class="no">ftp_root</span> <span class="kw">&lt;-</span> <span class="st">"ftp://opendata.dwd.de/climate_environment/CDC/"</span>

<span class="co"># Define the URL to the historical RADOLAN files</span>
<span class="no">url</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">ftp_root</span>, <span class="st">"grids_germany/daily/radolan/historical"</span>)

<span class="co"># List all historical RADOLAN files</span>
<span class="no">urls</span> <span class="kw">&lt;-</span> <span class="kw pkg">kwb.dwd</span><span class="kw ns">::</span><span class="fu"><a href="../reference/list_url.html">list_url</a></span>(<span class="no">url</span>, <span class="kw">recursive</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>It takes about six seconds to get the file list. All file paths and file names (as they were listed on 2019-06-01) are also contained in the data frame <code>dwd_files</code> that is available in the package. You can browse through this data frame to find the files that you are looking for:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># Get data frame of all files</span>
<span class="no">dwd_files</span> <span class="kw">&lt;-</span> <span class="kw pkg">kwb.dwd</span><span class="kw ns">::</span><span class="no"><a href="../reference/dwd_files.html">dwd_files</a></span>

<span class="co"># Filter for historical RADOLAN files</span>
<span class="no">radolan_files</span> <span class="kw">&lt;-</span> <span class="no">dwd_files</span>[<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"radolan/historical"</span>, <span class="no">dwd_files</span>$<span class="no">url</span>), ]

<span class="co"># Shorten the path for better display</span>
<span class="no">radolan_files</span>$<span class="no">path</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="no">ftp_root</span>, <span class="st">"&lt;root&gt;/"</span>, <span class="no">radolan_files</span>$<span class="no">url</span>)

<span class="co"># Show the first file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw pkg">kwb.utils</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html">resetRowNames</a></span>(<span class="no">radolan_files</span>))
<span class="co">#&gt;                                                                                                              url</span>
<span class="co">#&gt; 1 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2006/SF-200610.tar.gz</span>
<span class="co">#&gt; 2 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2006/SF-200611.tar.gz</span>
<span class="co">#&gt; 3 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2006/SF-200612.tar.gz</span>
<span class="co">#&gt; 4 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2007/SF-200701.tar.gz</span>
<span class="co">#&gt; 5 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2007/SF-200702.tar.gz</span>
<span class="co">#&gt; 6 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2007/SF-200703.tar.gz</span>
<span class="co">#&gt;   type      size permissions modification_time</span>
<span class="co">#&gt; 1 file   7451505  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 2 file  53109545  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 3 file 138991915  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 4 file 228995524  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 5 file 174957194  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 6 file 186723651  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt;                                                                      path</span>
<span class="co">#&gt; 1 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2006/SF-200610.tar.gz</span>
<span class="co">#&gt; 2 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2006/SF-200611.tar.gz</span>
<span class="co">#&gt; 3 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2006/SF-200612.tar.gz</span>
<span class="co">#&gt; 4 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2007/SF-200701.tar.gz</span>
<span class="co">#&gt; 5 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2007/SF-200702.tar.gz</span>
<span class="co">#&gt; 6 &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2007/SF-200703.tar.gz</span>

<span class="co"># Show the last file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span>(<span class="kw pkg">kwb.utils</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html">resetRowNames</a></span>(<span class="no">radolan_files</span>))
<span class="co">#&gt;                                                                                                                                                          url</span>
<span class="co">#&gt; 134                                            ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2017/SF201711.tar.gz</span>
<span class="co">#&gt; 135                                            ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2017/SF201712.tar.gz</span>
<span class="co">#&gt; 136 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/hourly/radolan/historical/asc/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_asc_de.pdf</span>
<span class="co">#&gt; 137  ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/hourly/radolan/historical/asc/DESCRIPTION_gridsgermany_hourly_radolan_historical_asc_en.pdf</span>
<span class="co">#&gt; 138 ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_bin_de.pdf</span>
<span class="co">#&gt; 139  ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/hourly/radolan/historical/bin/DESCRIPTION_gridsgermany_hourly_radolan_historical_bin_en.pdf</span>
<span class="co">#&gt;     type      size permissions modification_time</span>
<span class="co">#&gt; 134 file 213342580  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 135 file 209225642  -rw-r--r--  2018-08-29 00:00</span>
<span class="co">#&gt; 136 file     66297  -rw-r--r--  2019-06-19 12:55</span>
<span class="co">#&gt; 137 file     65450  -rw-r--r--  2019-06-19 12:55</span>
<span class="co">#&gt; 138 file     65599  -rw-r--r--  2019-06-19 12:55</span>
<span class="co">#&gt; 139 file     62532  -rw-r--r--  2019-06-19 12:55</span>
<span class="co">#&gt;                                                                                                                  path</span>
<span class="co">#&gt; 134                                            &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2017/SF201711.tar.gz</span>
<span class="co">#&gt; 135                                            &lt;root&gt;/grids_germany/daily/radolan/historical/bin/2017/SF201712.tar.gz</span>
<span class="co">#&gt; 136 &lt;root&gt;/grids_germany/hourly/radolan/historical/asc/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_asc_de.pdf</span>
<span class="co">#&gt; 137  &lt;root&gt;/grids_germany/hourly/radolan/historical/asc/DESCRIPTION_gridsgermany_hourly_radolan_historical_asc_en.pdf</span>
<span class="co">#&gt; 138 &lt;root&gt;/grids_germany/hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany_hourly_radolan_historical_bin_de.pdf</span>
<span class="co">#&gt; 139  &lt;root&gt;/grids_germany/hourly/radolan/historical/bin/DESCRIPTION_gridsgermany_hourly_radolan_historical_bin_en.pdf</span></pre></body></html></div>
</div>
<div id="download-zipped-radolan-files-from-dwds-ftp-server" class="section level2">
<h2 class="hasAnchor">
<a href="#download-zipped-radolan-files-from-dwds-ftp-server" class="anchor"></a>Download zipped RADOLAN files from DWD’s FTP server</h2>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># Set the target directory</span>
<span class="no">export_dir</span> <span class="kw">&lt;-</span> <span class="st">"~/Downloads/radolan"</span>

<span class="co"># Download corresponding RADOLAN files from DWD's FTP server</span>
<span class="kw pkg">kwb.dwd</span><span class="kw ns">::</span><span class="fu"><a href="../reference/download_radolan.html">download_radolan</a></span>(
  <span class="kw">resolution</span> <span class="kw">=</span> <span class="st">"daily"</span>,
  <span class="kw">export_dir</span> <span class="kw">=</span> <span class="no">export_dir</span>,
  <span class="kw">start_daily</span> <span class="kw">=</span> <span class="st">"2018-07"</span>,
  <span class="kw">end_daily</span> <span class="kw">=</span> <span class="st">"2018-08"</span>
)</pre></body></html></div>
<p>The output should look like this:</p>
<pre><code>Download: 'daily' historical radolan data ... 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201807.tar.gz ... 
trying URL 'ftp://ftp-cdc.dwd.de/pub/CDC/grids_germany/daily/radolan/historical/2018/SF201807.tar.gz'
Content type 'unknown' length 138580953 bytes (132.2 MB)
==================================================
ok. (1.82s) 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201808.tar.gz ... 
trying URL 'ftp://ftp-cdc.dwd.de/pub/CDC/grids_germany/daily/radolan/historical/2018/SF201808.tar.gz'
Content type 'unknown' length 181877215 bytes (173.5 MB)
==================================================
ok. (2.43s) 
ok. (4.26s) </code></pre>
</div>
<div id="unzip-the-downloaded-files" class="section level2">
<h2 class="hasAnchor">
<a href="#unzip-the-downloaded-files" class="anchor"></a>Unzip the downloaded files</h2>
<pre><code># Get the paths to the zipped files
files &lt;- dir(export_dir, "\\.tar\\.gz", recursive = TRUE, full.names = TRUE)

# Unzip all files to the export directory
lapply(files, untar, exdir = export_dir)</code></pre>
</div>
<div id="read-the-binary-radolan-files" class="section level2">
<h2 class="hasAnchor">
<a href="#read-the-binary-radolan-files" class="anchor"></a>Read the binary Radolan files</h2>
<pre><code># Get the paths to all binary Radolan files in the export directory
files_bin &lt;- dir(export_dir, "---bin$", full.names = TRUE)

# Read all Radolan files (raw format: vectors of integer values)
contents_bin &lt;- lapply(files_bin, function(file) kwb.utils::catAndRun(
  paste("Reading", file),
  kwb.dwd:::read_binary_radolan_file_raw(file)
))

# Convert Radolan raw data to raster objects
raster_objects &lt;- lapply(contents_bin, kwb.dwd:::radolan_raw_to_raster)</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hauke Sonnenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
