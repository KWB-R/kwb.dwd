<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="kwb.dwd">
<title>Download RADOLAN Data • kwb.dwd</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download RADOLAN Data">
<meta property="og:description" content="kwb.dwd">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">kwb.dwd</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/radolan.html">Download RADOLAN Data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/KWB-R/kwb.dwd/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="radolan_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Download RADOLAN Data</h1>
                        <h4 data-toc-skip class="author">Hauke Sonnenberg</h4>
            
            <h4 data-toc-skip class="date">2022-06-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KWB-R/kwb.dwd/blob/HEAD/vignettes/radolan.Rmd" class="external-link"><code>vignettes/radolan.Rmd</code></a></small>
      <div class="d-none name"><code>radolan.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="install-this-package">Install this package<a class="anchor" aria-label="anchor" href="#install-this-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If required, install the remotes package from CRAN</span>
<span class="co"># install.packages("remotes")</span>

<span class="co"># Install kwb.dwd from GitHub</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"KWB-R/kwb.dwd"</span><span class="op">)</span>

<span class="co"># Install the current development version</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"KWB-R/kwb.dwd@dev"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="list-files-available-on-dwds-ftp-server">List files available on DWD’s FTP server<a class="anchor" aria-label="anchor" href="#list-files-available-on-dwds-ftp-server"></a>
</h2>
<p>This package contains a function that lists the files that are available on an FTP server. It allows for recursive listing, i.e. listing the files in folders and subfolders. For example, to list all historical RADOLAN files, do:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define the URL to the historical RADOLAN files</span>
<span class="va">url</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">:::</span><span class="fu">ftp_path_cdc</span><span class="op">(</span><span class="st">"grids_germany/daily/radolan/historical"</span><span class="op">)</span>

<span class="co"># List all historical RADOLAN files</span>
<span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/list_url.html">list_url</a></span><span class="op">(</span><span class="va">url</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>It takes about six seconds to get the file list. All file paths and file names (as they were listed on 2022-04-27) are also contained in the data frame <code>dwd_files</code> that is available in the package. You can browse through this data frame to find the files that you are looking for:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get data frame of all files</span>
<span class="va">dwd_files</span> <span class="op">&lt;-</span> <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="va"><a href="../reference/dwd_files.html">dwd_files</a></span>

<span class="co"># Filter for historical RADOLAN files</span>
<span class="va">radolan_files</span> <span class="op">&lt;-</span> <span class="va">dwd_files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"radolan/historical"</span>, <span class="va">dwd_files</span><span class="op">$</span><span class="va">file</span><span class="op">)</span>, <span class="op">]</span>

<span class="co"># Shorten the path for better display</span>
<span class="va">radolan_files</span><span class="op">$</span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"^grids_germany/"</span>, <span class="st">""</span>, <span class="va">radolan_files</span><span class="op">$</span><span class="va">file</span><span class="op">)</span>

<span class="co"># Show the first file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html" class="external-link">resetRowNames</a></span><span class="op">(</span><span class="va">radolan_files</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                                                               file isdir</span>
<span class="co">#&gt; 1 grids_germany/daily/radolan/historical/bin/2006/SF-200610.tar.gz FALSE</span>
<span class="co">#&gt; 2 grids_germany/daily/radolan/historical/bin/2006/SF-200611.tar.gz FALSE</span>
<span class="co">#&gt; 3 grids_germany/daily/radolan/historical/bin/2006/SF-200612.tar.gz FALSE</span>
<span class="co">#&gt; 4 grids_germany/daily/radolan/historical/bin/2007/SF-200701.tar.gz FALSE</span>
<span class="co">#&gt; 5 grids_germany/daily/radolan/historical/bin/2007/SF-200702.tar.gz FALSE</span>
<span class="co">#&gt; 6 grids_germany/daily/radolan/historical/bin/2007/SF-200703.tar.gz FALSE</span>
<span class="co">#&gt;        size permissions modification_time user group links</span>
<span class="co">#&gt; 1   7451505  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt; 2  53109545  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt; 3 138991915  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt; 4 228995524  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt; 5 174957194  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt; 6 186723651  -rw-r--r--  2020-03-30 00:00 9261 15101     1</span>
<span class="co">#&gt;                                                 path</span>
<span class="co">#&gt; 1 daily/radolan/historical/bin/2006/SF-200610.tar.gz</span>
<span class="co">#&gt; 2 daily/radolan/historical/bin/2006/SF-200611.tar.gz</span>
<span class="co">#&gt; 3 daily/radolan/historical/bin/2006/SF-200612.tar.gz</span>
<span class="co">#&gt; 4 daily/radolan/historical/bin/2007/SF-200701.tar.gz</span>
<span class="co">#&gt; 5 daily/radolan/historical/bin/2007/SF-200702.tar.gz</span>
<span class="co">#&gt; 6 daily/radolan/historical/bin/2007/SF-200703.tar.gz</span>

<span class="co"># Show the last file paths</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/resetRowNames.html" class="external-link">resetRowNames</a></span><span class="op">(</span><span class="va">radolan_files</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                                                                                                           file</span>
<span class="co">#&gt; 580                                           grids_germany/hourly/radolan/historical/bin/2021/RW202109.tar.gz</span>
<span class="co">#&gt; 581                                           grids_germany/hourly/radolan/historical/bin/2021/RW202110.tar.gz</span>
<span class="co">#&gt; 582                                           grids_germany/hourly/radolan/historical/bin/2021/RW202111.tar.gz</span>
<span class="co">#&gt; 583                                           grids_germany/hourly/radolan/historical/bin/2021/RW202112.tar.gz</span>
<span class="co">#&gt; 584 grids_germany/hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany-hourly-radolan-historical-bin_de.pdf</span>
<span class="co">#&gt; 585  grids_germany/hourly/radolan/historical/bin/DESCRIPTION_gridsgermany-hourly-radolan-historical-bin_en.pdf</span>
<span class="co">#&gt;     isdir     size permissions modification_time user group links</span>
<span class="co">#&gt; 580 FALSE 22516914  -rw-r--r--  2022-03-17 13:59 9261 15101     1</span>
<span class="co">#&gt; 581 FALSE 33268966  -rw-r--r--  2022-03-17 13:59 9261 15101     1</span>
<span class="co">#&gt; 582 FALSE 29952317  -rw-r--r--  2022-03-17 13:59 9261 15101     1</span>
<span class="co">#&gt; 583 FALSE 35160103  -rw-r--r--  2022-03-17 13:59 9261 15101     1</span>
<span class="co">#&gt; 584 FALSE   134365  -rw-r--r--  2021-07-19 00:00 9261 15101     1</span>
<span class="co">#&gt; 585 FALSE   129857  -rw-r--r--  2021-07-19 00:00 9261 15101     1</span>
<span class="co">#&gt;                                                                                             path</span>
<span class="co">#&gt; 580                                           hourly/radolan/historical/bin/2021/RW202109.tar.gz</span>
<span class="co">#&gt; 581                                           hourly/radolan/historical/bin/2021/RW202110.tar.gz</span>
<span class="co">#&gt; 582                                           hourly/radolan/historical/bin/2021/RW202111.tar.gz</span>
<span class="co">#&gt; 583                                           hourly/radolan/historical/bin/2021/RW202112.tar.gz</span>
<span class="co">#&gt; 584 hourly/radolan/historical/bin/BESCHREIBUNG_gridsgermany-hourly-radolan-historical-bin_de.pdf</span>
<span class="co">#&gt; 585  hourly/radolan/historical/bin/DESCRIPTION_gridsgermany-hourly-radolan-historical-bin_en.pdf</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="download-zipped-radolan-files-from-dwds-ftp-server">Download zipped RADOLAN files from DWD’s FTP server<a class="anchor" aria-label="anchor" href="#download-zipped-radolan-files-from-dwds-ftp-server"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Set the target directory</span>
<span class="va">export_dir</span> <span class="op">&lt;-</span> <span class="st">"~/Downloads/radolan"</span>

<span class="co"># Create required directories</span>
<span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/createDirectory.html" class="external-link">createDirectory</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"daily/historical"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Download corresponding RADOLAN files from DWD's FTP server</span>
<span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/download_radolan.html">download_radolan</a></span><span class="op">(</span>
  resolution <span class="op">=</span> <span class="st">"daily"</span>,  
  export_dir <span class="op">=</span> <span class="va">export_dir</span>, 
  start_daily <span class="op">=</span> <span class="st">"2018-07"</span>, 
  end_daily <span class="op">=</span> <span class="st">"2018-08"</span>
<span class="op">)</span></code></pre></div>
<p>The output should look like this:</p>
<pre><code>Download: 'daily' historical radolan data ... 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201807.tar.gz ... 
versuche URL 'ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2018/SF201807.tar.gz'
downloaded 132.2 MB

ok. (1.48s) 
Download: "daily, historical" and save to ~/Downloads/radolan/daily/historical/SF201808.tar.gz ... 
versuche URL 'ftp://opendata.dwd.de/climate_environment/CDC/grids_germany/daily/radolan/historical/bin/2018/SF201808.tar.gz'
downloaded 173.5 MB

ok. (1.97s) 
ok. (3.45s) </code></pre>
</div>
<div class="section level2">
<h2 id="unzip-the-downloaded-files">Unzip the downloaded files<a class="anchor" aria-label="anchor" href="#unzip-the-downloaded-files"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the paths to the zipped files</span>
<span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"\\.tar\\.gz"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Unzip all files to the export directory</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">untar</span>, exdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/path.expand.html" class="external-link">path.expand</a></span><span class="op">(</span><span class="va">export_dir</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="read-the-binary-radolan-files">Read the binary Radolan files<a class="anchor" aria-label="anchor" href="#read-the-binary-radolan-files"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the paths to all binary Radolan files in the export directory</span>
<span class="va">files_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">export_dir</span>, <span class="st">"---bin$"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Read all Radolan files as raster objects</span>
<span class="va">raster_objects</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">files_bin</span>, <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="fu">kwb.utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.utils/man/catAndRun.html" class="external-link">catAndRun</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Reading"</span>, <span class="va">file</span><span class="op">)</span>,
  <span class="fu">kwb.dwd</span><span class="fu">::</span><span class="fu"><a href="../reference/read_binary_radolan_file.html">read_binary_radolan_file</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="op">)</span><span class="op">)</span>

<span class="co"># Plot the contents of one file</span>
<span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">raster_objects</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://kompetenz-wasser.de/en/ueber-uns/team/hauke-sonnenberg" class="external-link">Hauke Sonnenberg</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
